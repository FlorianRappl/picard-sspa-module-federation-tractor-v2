{"version":3,"file":"542.js","sources":["webpack://app/./node_modules/picard-js/dist/client/debug-IXK5RSGI.mjs"],"sourcesContent":["// src/common/debug/decycle.ts\nfunction decycle(obj) {\n  const objects = [];\n  const paths = [];\n  const derez = (value, path) => {\n    const _value = value && value.toJSON instanceof Function ? value.toJSON() : value;\n    if (_value === null || _value === void 0) {\n      return void 0;\n    } else if (typeof _value === \"function\") {\n      return `<function>`;\n    } else if (_value instanceof Error) {\n      return `<error>`;\n    } else if (_value instanceof Node) {\n      return `<node>`;\n    } else if (typeof _value === \"object\") {\n      for (let i = 0; i < objects.length; i++) {\n        if (objects[i] === _value) {\n          return { $ref: paths[i] };\n        }\n      }\n      objects.push(_value);\n      paths.push(path);\n      if (Array.isArray(_value)) {\n        const nu = [];\n        for (let i = 0; i < _value.length; i += 1) {\n          nu[i] = derez(_value[i], `${path}[${i}]`);\n        }\n        return nu;\n      } else {\n        const nu = {};\n        for (const name in _value) {\n          if (Object.prototype.hasOwnProperty.call(_value, name)) {\n            nu[name] = derez(_value[name], `${path}[${JSON.stringify(name)}]`);\n          }\n        }\n        return nu;\n      }\n    } else if (typeof _value === \"symbol\") {\n      return \"<symbol>\";\n    } else if (typeof _value === \"bigint\") {\n      return \"<bigint>\";\n    }\n    return _value;\n  };\n  return derez(obj, \"$\");\n}\n\n// src/common/debug/visualizer.ts\nvar visualizerName = \"piral-inspector-visualizer\";\nvar colors = [\n  \"#001F3F\",\n  \"#0074D9\",\n  \"#7FDBFF\",\n  \"#39CCCC\",\n  \"#3D9970\",\n  \"#2ECC40\",\n  \"#01FF70\",\n  \"#FFDC00\",\n  \"#FF851B\",\n  \"#FF4136\",\n  \"#85144B\",\n  \"#F012BE\",\n  \"#B10DC9\"\n];\nvar defaultPosition = new DOMRectReadOnly(0, 0, 0, 0);\nfunction getTarget(element) {\n  const row = element.childNodes;\n  const positions = [...row].map((item) => {\n    if (item instanceof Element) {\n      return item.getBoundingClientRect();\n    } else if (item instanceof Text) {\n      const range = document.createRange();\n      range.selectNode(item);\n      return range.getBoundingClientRect();\n    } else {\n      return defaultPosition;\n    }\n  }).filter((m) => m.height !== 0 && m.width !== 0);\n  const initial = positions.pop() || defaultPosition;\n  return positions.reduce((a, b) => {\n    const x = Math.min(a.left, b.left);\n    const y = Math.min(a.top, b.top);\n    const width = Math.max(a.right, b.right) - x;\n    const height = Math.max(a.bottom, b.bottom) - y;\n    return new DOMRectReadOnly(x, y, width, height);\n  }, initial);\n}\nfunction attachVisualizer(scope, events, componentName) {\n  const mfColorMap = {};\n  const getMicrofrontend = (element) => {\n    const origin = element.getAttribute(\"origin\");\n    if (origin) {\n      return origin;\n    }\n    const cid = element.getAttribute(\"cid\");\n    if (cid) {\n      const state = scope.readState();\n      const mf = state.microfrontends.find((m) => cid in m.components);\n      return mf?.name || \"\";\n    }\n    const source = element.getAttribute(\"source\");\n    if (source) {\n      const state = scope.readState();\n      const mf = state.microfrontends.find((m) => m.source === source);\n      return mf?.name || \"\";\n    }\n    return \"\";\n  };\n  class PiralInspectorVisualizer extends HTMLElement {\n    update = () => {\n      this.innerText = \"\";\n      document.querySelectorAll(componentName).forEach((element) => {\n        const mf = getMicrofrontend(element);\n        const vis = this.appendChild(document.createElement(\"div\"));\n        const info = vis.appendChild(document.createElement(\"div\"));\n        const targetRect = getTarget(element);\n        const color = mfColorMap[mf] || (mfColorMap[mf] = colors[Object.keys(mfColorMap).length % colors.length]);\n        vis.style.position = \"absolute\";\n        vis.style.left = targetRect.left + \"px\";\n        vis.style.top = targetRect.top + \"px\";\n        vis.style.width = targetRect.width + \"px\";\n        vis.style.height = targetRect.height + \"px\";\n        vis.style.pointerEvents = \"none\";\n        vis.style.zIndex = \"99999999999\";\n        vis.style.border = `1px dashed ${color}`;\n        info.style.color = \"white\";\n        info.textContent = mf;\n        info.style.textOverflow = \"ellipsis\";\n        info.style.position = \"absolute\";\n        info.style.overflow = \"hidden\";\n        info.style.whiteSpace = \"nowrap\";\n        info.style.right = \"0\";\n        info.style.left = \"0\";\n        info.style.top = \"0\";\n        info.style.padding = \"4px\";\n        info.style.fontSize = \"8px\";\n        info.style.background = color;\n      });\n    };\n    connectedCallback() {\n      this.style.position = \"absolute\";\n      this.style.top = \"0\";\n      this.style.left = \"0\";\n      this.style.width = \"0\";\n      this.style.height = \"0\";\n      window.addEventListener(\"resize\", this.update);\n      events.on(\"mounted-component\", this.update);\n      events.on(\"unmounted-component\", this.update);\n      this.update();\n    }\n    disconnectedCallback() {\n      window.removeEventListener(\"resize\", this.update);\n      events.off(\"mounted-component\", this.update);\n      events.off(\"unmounted-component\", this.update);\n    }\n  }\n  customElements.define(visualizerName, PiralInspectorVisualizer);\n  return {\n    toggle() {\n      const visualizer = document.querySelector(visualizerName);\n      if (visualizer) {\n        visualizer.remove();\n      } else {\n        document.body.appendChild(document.createElement(visualizerName));\n      }\n    }\n  };\n}\n\n// src/common/debug/index.ts\nvar selfSource = \"piral-debug-api\";\nvar debugApiVersion = \"v1\";\nfunction sendMessage(data) {\n  const message = {\n    content: decycle(data),\n    source: selfSource,\n    version: debugApiVersion\n  };\n  window.postMessage(message, \"*\");\n}\nfunction findAncestor(parent, subDeps) {\n  while (subDeps[parent]) {\n    parent = subDeps[parent];\n  }\n  return parent;\n}\nfunction attach(events, name, handler) {\n  events.on(name, handler);\n  return () => {\n    events.off(name, handler);\n  };\n}\nfunction initializeDebugAdapter({ config, events, router, scope }) {\n  const { componentName } = config;\n  const eventList = [];\n  const depMap = {};\n  const subDeps = {};\n  const visualizer = attachVisualizer(scope, events, componentName);\n  const addDeps = (result, name, dependencies) => {\n    const deps = result[name] || [];\n    for (const depName of Object.keys(dependencies)) {\n      if (!deps.some((m) => m.demanded === depName)) {\n        deps.push({\n          demanded: depName,\n          resolved: dependencies[depName]\n        });\n      }\n    }\n    result[name] = deps;\n  };\n  const detachResolved = attach(events, \"resolved-dependency\", ({ id, parentUrl, result }) => {\n    if (parentUrl) {\n      const ancestor = findAncestor(parentUrl, subDeps);\n      if (id.startsWith(\"./\")) {\n        subDeps[result] = ancestor;\n      } else {\n        const deps = depMap[ancestor] || {};\n        deps[id] = result;\n        depMap[ancestor] = deps;\n      }\n    }\n  });\n  const detachAll = attach(events, \"*\", (ev) => {\n    eventList.unshift({\n      id: eventList.length.toString(),\n      name: ev.name,\n      args: decycle(ev.args),\n      time: Date.now()\n    });\n    sendMessage({\n      events: eventList,\n      type: \"events\"\n    });\n  });\n  const getMicrofrontends = () => {\n    const state = scope.readState();\n    return state.microfrontends.filter((m) => m.flags !== 2).map((m) => ({\n      name: m.name,\n      version: \"0.0.0\",\n      type: m.format,\n      root: m.source,\n      url: m.details.url || m.source,\n      disabled: m.flags === 1\n    }));\n  };\n  const getDependencies = () => {\n    const result = {};\n    const mfs = getMicrofrontends().filter((m) => m.url);\n    Object.keys(depMap).forEach((url) => {\n      const dependencies = depMap[url];\n      const mf = mfs.find((p) => p.url === url);\n      if (mf) {\n        addDeps(result, mf.name, dependencies);\n      } else if (!mf) {\n        const parent = mfs.find((p) => url.startsWith(p.root));\n        if (parent) {\n          addDeps(result, parent.name, dependencies);\n        }\n      }\n    });\n    return result;\n  };\n  const addMicrofrontend = (meta) => {\n    scope.appendMicrofrontend({\n      name: meta.name,\n      format: \"pilet\",\n      components: [],\n      assets: [],\n      details: meta,\n      source: meta.name,\n      flags: 0\n    });\n  };\n  const getSlotNames = () => {\n    const state = scope.readState();\n    return Object.entries(state.components).filter(([, v]) => v.length).map(([k]) => k);\n  };\n  const unsubscribe = scope.subscribe((current, previous) => {\n    sendMessage({\n      type: \"container\",\n      container: current\n    });\n    if (current.microfrontends !== previous.microfrontends) {\n      sendMessage({\n        type: \"pilets\",\n        pilets: getMicrofrontends()\n      });\n    }\n    if (current.components !== previous.components) {\n      sendMessage({\n        type: \"routes\",\n        routes: router.findRoutes()\n      });\n      sendMessage({\n        type: \"extensions\",\n        extensions: getSlotNames()\n      });\n    }\n  });\n  const settings = {\n    extensionCatalogue: true,\n    viewOrigins: true\n  };\n  const inspectorSettings = {\n    viewOrigins: {\n      value: settings.viewOrigins,\n      type: \"boolean\",\n      label: \"Visualize component origins\",\n      onChange(value) {\n        settings.viewOrigins = value;\n      }\n    },\n    extensionCatalogue: {\n      value: settings.extensionCatalogue,\n      type: \"boolean\",\n      label: \"Enable extension catalogue\",\n      onChange(value) {\n        settings.extensionCatalogue = value;\n      }\n    }\n  };\n  const getSettings = () => {\n    return Object.keys(inspectorSettings).reduce((obj, key) => {\n      const setting = inspectorSettings[key];\n      if (setting && typeof setting === \"object\" && typeof setting.label === \"string\" && typeof setting.type === \"string\" && [\"boolean\", \"string\", \"number\"].includes(typeof setting.value)) {\n        obj[key] = {\n          label: setting.label,\n          value: setting.value,\n          type: setting.type\n        };\n      }\n      return obj;\n    }, {});\n  };\n  const updateSettings = (values) => {\n    Object.keys(values).forEach((name) => {\n      const setting = inspectorSettings[name];\n      switch (setting.type) {\n        case \"boolean\": {\n          const prev = setting.value;\n          const value = values[name];\n          setting.value = value;\n          setting.onChange(value, prev);\n          break;\n        }\n        case \"number\": {\n          const prev = setting.value;\n          const value = values[name];\n          setting.value = value;\n          setting.onChange(value, prev);\n          break;\n        }\n        case \"string\": {\n          const prev = setting.value;\n          const value = values[name];\n          setting.value = value;\n          setting.onChange(value, prev);\n          break;\n        }\n      }\n    });\n    sendMessage({\n      settings: getSettings(),\n      type: \"settings\"\n    });\n  };\n  const app = {\n    name: config.meta?.name || document.querySelector(\"meta[name=app-name]\")?.getAttribute(\"content\") || \"App\",\n    version: config.meta?.version || document.querySelector(\"meta[name=app-version]\")?.getAttribute(\"content\") || \"-\"\n  };\n  const details = {\n    name: app.name,\n    version: app.version,\n    kind: debugApiVersion,\n    mode: \"development\",\n    capabilities: [\n      \"events\",\n      \"container\",\n      \"routes\",\n      \"pilets\",\n      \"settings\",\n      \"extensions\",\n      \"dependencies\",\n      \"dependency-map\"\n    ]\n  };\n  const start = () => {\n    sendMessage({\n      type: \"available\",\n      ...details,\n      state: {\n        routes: router.findRoutes(),\n        pilets: getMicrofrontends(),\n        container: scope.readState(),\n        settings: getSettings(),\n        events: eventList,\n        extensions: getSlotNames(),\n        dependencies: []\n      }\n    });\n  };\n  const check = () => {\n    sendMessage({\n      type: \"info\",\n      ...details\n    });\n  };\n  const getDependencyMap = () => {\n    const dependencyMap = getDependencies();\n    sendMessage({\n      type: \"dependency-map\",\n      dependencyMap\n    });\n  };\n  const handler = (event) => {\n    const { source, version, content } = event.data;\n    if (source !== selfSource && version === debugApiVersion) {\n      switch (content.type) {\n        case \"init\":\n          return start();\n        case \"check-piral\":\n          return check();\n        case \"get-dependency-map\":\n          return getDependencyMap();\n        case \"update-settings\":\n          return updateSettings(content.settings);\n        case \"append-pilet\":\n          return addMicrofrontend(content.meta);\n        case \"remove-pilet\":\n          return scope.removeMicrofrontend(content.name);\n        case \"toggle-pilet\":\n          return scope.toggleMicrofrontend(content.name);\n        case \"emit-event\":\n          return events.emit(content.name, content.args);\n        case \"goto-route\":\n          return router.navigate(content.route, content.state);\n        case \"visualize-all\":\n          return visualizer.toggle();\n      }\n    }\n  };\n  window.addEventListener(\"message\", handler);\n  const disconnect = () => {\n    window.removeEventListener(\"message\", handler);\n  };\n  return {\n    dispose() {\n      disconnect();\n      detachResolved();\n      detachAll();\n      unsubscribe();\n    }\n  };\n}\nexport {\n  initializeDebugAdapter\n};\n//# sourceMappingURL=debug-IXK5RSGI.mjs.map\n"],"names":["decycle","obj","objects","paths","derez","value","path","_value","toJSON","Function","Error","Node","i","length","$ref","push","Array","isArray","nu","name","Object","prototype","hasOwnProperty","call","JSON","stringify","visualizerName","colors","defaultPosition","DOMRectReadOnly","selfSource","sendMessage","data","message","content","source","version","window","postMessage","attach","events","handler","on","off","initializeDebugAdapter","config","router","scope","componentName","eventList","depMap","subDeps","visualizer","attachVisualizer","mfColorMap","getMicrofrontend","element","origin","getAttribute","cid","mf","state","readState","microfrontends","find","m","components","PiralInspectorVisualizer","HTMLElement","update","innerText","document","querySelectorAll","forEach","vis","appendChild","createElement","info","targetRect","getTarget","positions","childNodes","map","item","Element","getBoundingClientRect","Text","range","createRange","selectNode","filter","height","width","initial","pop","reduce","a","b","x","Math","min","left","y","top","max","right","bottom","color","keys","style","position","pointerEvents","zIndex","border","textContent","textOverflow","overflow","whiteSpace","padding","fontSize","background","connectedCallback","addEventListener","disconnectedCallback","removeEventListener","customElements","define","toggle","querySelector","remove","body","addDeps","result","dependencies","deps","depName","some","demanded","resolved","detachResolved","id","parentUrl","ancestor","findAncestor","parent","startsWith","detachAll","ev","unshift","toString","args","time","Date","now","type","getMicrofrontends","flags","format","root","url","details","disabled","getDependencies","mfs","p","addMicrofrontend","meta","appendMicrofrontend","assets","getSlotNames","entries","v","k","unsubscribe","subscribe","current","previous","container","pilets","routes","findRoutes","extensions","settings","extensionCatalogue","viewOrigins","inspectorSettings","label","onChange","getSettings","key","setting","includes","updateSettings","values","prev","app","kind","mode","capabilities","start","check","getDependencyMap","dependencyMap","event","removeMicrofrontend","toggleMicrofrontend","emit","navigate","route","disconnect","dispose"],"mappings":"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"}